
#--------------------------------------------------
Date: Wed May 15 23:28:39 PDT 2019
source ./bin/s00-read_file_and_generate_many_csv_files.sh ./raw/00All.xls

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fileName: $1 ./raw/00All.xls

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# scriptNAME: s00-read_file_and_generate_many_csv_files.sh
#-
# PURPOSE: Reads an input filename (raw) and generates many csv files
#-
# INPUT-: ./raw/00All.xls
# OUTPUT: ./tmp/*.*
# OUTPUT: ./dat/*.*

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cp -a ./raw/00All.xls ./tmp/01All.txt

source ...

#==================================================


#--------------------------------------------------
Date: Wed May 15 23:28:39 PDT 2019
source ./bin/s01-initial_process.sh ./tmp/01All.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fileName: $1 ./tmp/01All.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# scriptNAME: s01-initial_process.sh
#-
# PURPOSE: Convert tabs to spaces and Convert html symbols to text
#-
# INPUT-: ./tmp/01All.txt
# I/O---: ./tmp/02All.txt
# OUTPUT: ./tmp/03All.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# 1) Convert tabs to spaces:
expand ./tmp/01All.txt > ./tmp/02All.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# 2) Convert html symbols to text:
cat  ./tmp/02All.txt | sed 's/\xC3\xB1/n/g' \
                     | sed 's/\&#241;/n/g'  \
                     | sed 's/\&nbsp;/ /g'  \
                     | sed "s/\&#8217;/'/g" \
                     | sed "s/\&amp;/\&/g"  \
                     | sed "s/\&ndash/-/g"  \
> ./tmp/03All.txt

#==================================================


#--------------------------------------------------
Date: Wed May 15 23:28:39 PDT 2019
source ./bin/s02-flag_the_significant_lines.sh ./tmp/03All.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fileName: $1 ./tmp/03All.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# scriptNAME: s02-flag_the_significant_lines.sh
#-
# PURPOSE: Does initial cleaning and markups (flags) significat lines
#-
# INPUT-: ./tmp/03All.txt 
# OUTPUT: ./tmp/02flagSignificantLines.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Do initial cleaning and markup (flag) significat lines:
ex $1 <<EOS
so ./bin/01cleaning.so
so ./bin/02markBasics.so
so ./bin/03markData.so
so ./bin/04cleaning.so
so ./bin/05joinData.so
so ./bin/06addColumns.so
w! ./tmp//04flagSignificantLines.txt
q!
EOS

#==================================================


#--------------------------------------------------
Date: Wed May 15 23:28:41 PDT 2019
source ./bin/ s03-insert_instructor_names.sh ./tmp/04flagSignificantLines.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fileName: $1 ./tmp/04flagSignificantLines.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# scriptNAME: s03-insert_instructor_names.sh
#-
# PURPOSE: Inserts instructor names for each record
#-
# INPUT-: ./tmp/04flagSignificantLines.txt
# I/O---: ./tmp/05replaceNames.so
# OUTPUT: ./tmp/06insertedNames.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Create a vim script which inserts instructor names:
ex $1 <<EOS
so ./bin/07replaceNames.so
w! ./tmp/05replaceNames.so
q!
EOS

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Insert instructor names for each record:
ex ./tmp//04flagSignificantLines.txt <<EOS
so ./tmp/05replaceNames.so
w! ./tmp/06insertedNames.txt
q!
EOS

#==================================================


#--------------------------------------------------
Date: Wed May 15 23:28:41 PDT 2019
source ./bin/s04-Create_csv_file_for_Regular_Classes.sh ./tmp/06insertedNames.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fileName: $1 ./tmp/06insertedNames.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# scriptNAME ./bin/s04-Create_csv_file_for_Regular_Classes.sh
#-
# PURPOSE: Creates a csv file for regular Classes
#
# INPUT-: ./tmp/06insertedNames.txt
# I/O---: ./tmp/07ClassAll.txt
# OUTPUT: ./dat/00-01-Class-All.csv

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Create a csv file for regular Classes:
ex $1 <<EOS
so ./bin/08prepareClass.so
w! ./tmp/07ClassAll.txt
so ./bin/09cleaning.so
w! ./dat/00-01-Class-All.csv
q!
EOS

#==================================================


#--------------------------------------------------
Date: Wed May 15 23:28:41 PDT 2019
source ./bin/s05-Create_csv_file_for_Private_Lessons.sh ./tmp/06insertedNames.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fileName: $1 ./tmp/06insertedNames.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# scriptNAME: s05-Create_csv_file_for_Private_Lessons.sh
#-
# Create a csv file for Private Lessons
#
# Input-: ./tmp/06insertedNames.txt
# I/O---: ./tmp/08PrivateAll.txt
# Output: ./dat/00-02-Private-All.csv

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Create a csv file for Private Lessons:
ex $1 <<EOS
so ./bin/10preparePrivate.so
w! ./tmp/08PrivateAll.txt
so ./bin/11cleaning.so
w! ./dat/00-02-Private-All.csv
q!
EOS

#==================================================


#--------------------------------------------------
Date: Wed May 15 23:28:41 PDT 2019
source ./bin/s06-generate_csv_files_for_Regular_Classes.sh ./tmp/07ClassAll.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fileName: $1 ./tmp/07ClassAll.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# scriptNAME: s06-generate_csv_files_for_Regular_Classes.sh
#----------------------------------------------------------------------
# PURPOSE: Generates one csv file for each set of instructors
#          for Regula Classes
#
# INPUT-: ./tmp/07ClassAll.txt
# OUTPUT: ./dat/01-Class-001-<name>.csv
#         ./dat/01-Class-002-<name>.csv
#         ...

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Create a vim script for Regular Classes,
# which generate csv files,
# one for each set of instructors:
ex $1 <<EOS
so ./bin/12part1.so
w! ./tmp/09ClassPart.1
e! $1
so ./bin/13part2.so
g/^./s/^/01-Class-/
g/^./s/^/.\/dat\//
w! ./tmp/10ClassPart.2
q!
EOS

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
paste ./tmp/09ClassPart.1 ./tmp/10ClassPart.2 \
> ./tmp/11ClassEach.so"

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Generate one csv file for each set of instructors
# for Regula Classes:
ex $1 <<EOS
g/?<and>?/s//\&/g
so ./tmp/11ClassEach.so
q!
EOS

#==================================================


#--------------------------------------------------
Date: Wed May 15 23:28:41 PDT 2019
source ./bin/s07-generate_csv_files_for_Private_Lessons.sh ./tmp/08PrivateAll.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
fileName: $1 ./tmp/08PrivateAll.txt

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# scriptNAME: ./bin/s07-generate_csv_files_for_Private_Lessons.sh
#-
# PURPOSE: Generates one csv file for each set of instructors
#          for Private Lessons
#-
# INPUT-: ./tmp/08PrivateAll.txt
# OUTPUT: ./dat/02-Private-001-<name>.csv
#         ./dat/02-Private-002-<name>.csv
#         ...

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Create a vim script for Private Lessons,
# which generate csv files,
# one for each set of instructors:
ex $1 <<EOS
so ./bin/12part1.so
w! ./tmp/12PrivatePart.1
e! $1
so ./bin/13part2.so
g/^./s/^/02-Private-/
g/^./s/^/.\/dat\//
w! ./tmp/13PrivatePart.2
q!
EOS

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
paste ./tmp/12PrivatePart.1 ./tmp/13PrivatePart.2 \
> ./tmp/14PrivateEach.so"

#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Generate one csv file for each set of instructors
# for Private Lessons:
ex $1 <<EOS
g/?<and>?/s//\&/g
so ./tmp/14PrivateEach.so
q!
EOS

#==================================================

